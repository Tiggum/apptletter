{"version":3,"sources":["../src/createLetter.js"],"names":["data","header","header1","subheader1","subheader2","body","fontSize","date","to","from","subject","appointees","name","role","email","address","more","moreeeeeeeeeeeeeeeeeeeeeeeeeeeeee","howFar","weStray","paragraphs","footer","signature","branch","rank","position","createLetter","dataCallback","endCallback","doc","PDFDocument","size","margins","top","bottom","left","right","registerFont","on","generateHeader","generateAddress","generateBody","generateSignatureBlock","generateFooter","end","fillColor","font","text","continued","toUpperCase","align","image","page","width","height","fit","moveDown","center","widthOfString","lineBreak","signer","topLine","spaceWidth","textWidth","indent","i","length","console","log","rows","j","push","Object","values","tableJson","headers","keys","table","prepareHeader","prepareRow","row","indexColumn","indexRow","rectRow"],"mappings":"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","file":"createLetter.js","sourcesContent":["import PDFDocument from 'pdfkit-table'\n\nconst data = {\n    header: {\n        header1: \"DEPARTMENT OF THE AIR FORCE\",\n        subheader1: \"UNITED STATES SPACE FORCE\",\n        subheader2: \"SPACE DELTA 4\"\n    }, \n    body: {\n        fontSize: 10,\n        date: '22Sep2021',\n        to: '86 AW/SC',\n        from: 'Sgt Caden Reynolds',\n        subject: 'Unit Security Managers',\n        appointees: [\n            {\n                name: 'caden',\n                role: 'primary',\n                email: 'caden@mail.com',\n                address: 'somewhere not hereeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',\n                more: 'more',\n                moreeeeeeeeeeeeeeeeeeeeeeeeeeeeee: 'I NEED IT ',\n                howFar: 'can this go',\n                weStray: 'From gods light',\n                'Security Clearance': 'long names am i right',\n                'can we add some more': 'you betcha'\n            },\n            {\n                name: 'yordt',\n                role: 'alternate',\n                email: 'yordt@email.com'\n            },\n            { \n                name: 'beck',\n                role: 'overlord',\n                email: 'beck@mail.com'\n            }\n        ],\n        paragraphs: [\n            'In accordance with aaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',\n            'contains fouo',\n            'please contact for more info'\n        ]\n    },\n    footer: \"Videmus Mundum\",\n    signature: {\n        name: \"caden J. REYNOLDS\",\n        branch: \"UssF\",\n        rank: \"Sgt\",\n        position: \"Supra Coder\"\n    }\n}\n\nlet fontSize = 12\n\nconst createLetter = (data, dataCallback, endCallback) => {\n    let doc = new PDFDocument({size: 'Letter', margins: {top: .63*72, bottom: 72, left: 72, right: 72}})\n    doc.registerFont('Body', 'fonts/Trebuchet MS/TREBUC.TTF')\n    doc.registerFont('Header', 'fonts/Copperplate Gothic/COPRGTB.TTF')\n\n    doc.on('data', dataCallback)\n    doc.on('end', endCallback)\n    fontSize = data.body.fontSize\n    generateHeader(data.header, doc)\n    generateAddress(data.body, doc)\n    generateBody(data.body, doc)\n    generateSignatureBlock(data.signature, doc)\n    generateFooter(data.footer, doc)\n\n    doc.end()\n}\n\nconst generateHeader = (header, doc) => {\n    doc\n        .fillColor(\"#000099\")\n        .fontSize(12)\n        .font('fonts/Copperplate Gothic/COPRGTB.TTF')\n        .text('', 72, 45, {continued: true})\n        .text(header.header1.toUpperCase(), {align: \"center\"})\n        .fontSize(10.5)\n        .text(header.subheader1.toUpperCase(), {align: \"center\"})\n        .text(header.subheader2.toUpperCase(), {align: \"center\"})\n        .image(\"USSF Logo.png\", doc.page.width - 72 - .77*72/2, 36, {height: 72})\n        .image(\"DoD Seal.png\", 36, 36, {fit: [72, 72], })\n        .moveDown()\n}\n\nconst generateFooter = (footer, doc) => {\n    const center = doc.page.width/2 - doc.widthOfString(footer)/2\n    doc\n        .fontSize(9)\n        .fillColor(\"#000099\")\n        .font('fonts/Copperplate Gothic/COPRGTB.TTF')\n        .text(footer, center, doc.page.height - 63, {lineBreak: false} )\n}\n\nconst generateSignatureBlock = (signer, doc) => {\n    const topLine = `${signer.name.toUpperCase()}, ${signer.rank}, ${signer.branch.toUpperCase()}`\n    const spaceWidth = (7.5 * 72) - (4.5*72)\n    const textWidth = doc.widthOfString(topLine)\n    \n    if (textWidth > spaceWidth){\n        doc\n        .moveDown(3)\n        .font('./fonts/Trebuchet MS/TREBUC.TTF')\n        .fillColor('black')\n        .text( topLine, {indent: doc.page.width - 72*2 - textWidth} )\n        .text(signer.position, {indent: doc.page.width - 72*2 - textWidth})\n    } else {\n        doc\n        .moveDown(3)\n        .font('./fonts/Trebuchet MS/TREBUC.TTF')\n        .fillColor('black')\n        .text(\n            topLine,\n            {indent: 3.5*72} \n        )\n        .text(signer.position, {indent:3.5*72})\n    }\n}\n\nconst generateAddress = (body, doc) => {\n    doc\n        .font('./fonts/Trebuchet MS/TREBUC.TTF')\n        .fillColor('black')\n        .fontSize(body.fontSize)\n        .text('', 72, 72*2, {align: 'right'})\n        .moveDown()\n        .text(`MEMORANDUM FOR  ${body.to.toUpperCase()}`)\n        .moveDown()\n        .text(`FROM:  ${body.from.toUpperCase()}`)\n        .moveDown()\n        .text(`SUBJECT:  ${body.subject.toUpperCase()}`)\n}\n\nconst generateBody = (body, doc) => {\n    doc.moveDown()\n    const indent = doc.widthOfString('2.  ')\n    for (let i = 0; i < body.paragraphs.length; i++){\n        console.log(body.paragraphs[i])\n        doc\n            .text(`${i+1}.`, {continued: true})\n            .text('')\n            .text(body.paragraphs[i], 72+indent)\n            .text('', 72)\n            .moveDown()\n\n        if ( i === 0 && body.appointees.length !== 0){\n            const rows = []\n            \n            for (let j = 0; j < body.appointees.length; j++){\n                rows.push(Object.values(body.appointees[j]))\n            }\n            \n            const tableJson = {\n                headers: Object.keys(body.appointees[0]),\n                rows: rows,\n            }\n        \n            doc.table(tableJson, {\n                prepareHeader: () => doc.font('Body').fontSize(fontSize),\n                prepareRow: (row, indexColumn, indexRow, rectRow) => {\n                    doc.font('Body').fontSize(fontSize)\n                }\n            })\n        }\n    }   \n}\n\n\nexport default createLetter"]}